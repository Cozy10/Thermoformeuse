{"remainingRequest":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/romain/Bureau/Projet/2/Thermoformeuse/vue/src/components/Graphe_logs.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/src/components/Graphe_logs.vue","mtime":1586711142232},{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583847125793},{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/babel-loader/lib/index.js","mtime":1583847125770},{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/vuetify-loader/lib/loader.js","mtime":1583847126586},{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/cache-loader/dist/cjs.js","mtime":1583847125793},{"path":"/home/romain/Bureau/Projet/2/Thermoformeuse/vue/node_modules/vue-loader/lib/index.js","mtime":1583847126556}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdHcmFwaGVfbG9ncycsCiAgcHJvcHM6IFsnaXRlbUlkJ10sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBpZDogdGhpcy5pdGVtSWQsCiAgICAgIGxvZzogdW5kZWZpbmVkLAogICAgICBjb3VsZXVyczogWyIjZmYwMDAwIiwiIzAwMDBmZiIsIiNmZmZmMDAiLCIjMDAwMDAwIiwiIzgwMDAwMCIsIiNmZmE1MDAiLCIjMDA4MDAwIiwiIzgwMDA4MCIsIiNmZmQ3MDAiLCIjZmYwMGZmIiwiIzAwZmZmZiIsIiNmZmMwY2IiLCIjMDBmZmZmIiwiI2YwZmZmZiIsIiNmNWY1ZGMiLCIjYTUyYTJhIiwiIzAwMDA4YiIsIiMwMDhiOGIiLCIjYTlhOWE5IiwiIzAwNjQwMCIsIiNiZGI3NmIiLCIjOGIwMDhiIiwiIzU1NmIyZiIsIiNmZjhjMDAiLCIjOTkzMmNjIiwiIzhiMDAwMCIsIiNlOTk2N2EiLCIjOTQwMGQzIiwiI2ZmMDBmZiIsIiM0YjAwODIiLCIjZjBlNjhjIiwiI2FkZDhlNiIsIiNlMGZmZmYiLCIjOTBlZTkwIiwiI2QzZDNkMyIsIiNmZmI2YzEiLCIjZmZmZmUwIiwiIzAwZmYwMCIsIiMwMDAwODAiLCIjODA4MDAwIiwiIzgwMDA4MCIsIiNjMGMwYzAiLF0sCiAgICAgIGxhcmdldXJfZ3JhcGhlOiB1bmRlZmluZWQsCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sYXJnZXVyX2dyYXBoZSA9IE1hdGguZmxvb3Iod2luZG93LmlubmVyV2lkdGgqLjYpOwogICAgbGV0IGRhdGFfdG9fc2VuZCA9IFsiZ2V0X2RldGFpbF9sb2ciLCB0aGlzLmlkXTsKICAgIGxldCBoZWFkZXJzID0geydBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsCiAgICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBHRVQsIFBVVCwgT1BUSU9OUywgREVMRVRFJywKICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMsIEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiwgT3JpZ2luLCBBY2NlcHQsIENvbnRlbnQtVHlwZScsCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCB7CiAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICBoZWFkZXJzLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhX3RvX3NlbmQpCgogICAgfSkKICAgIC50aGVuKHJlcz0+IHJlcy5qc29uKCkpCiAgICAudGhlbihkYXRhID0+IHsKICAgICAgdGhpcy5sb2cgPSBkYXRhWzFdOwogICAgICB0aGlzLnRyYWNlckdyYXBoZSgpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0cmFjZXJHcmFwaGUoKXsKICAgICAgbGV0IGFic2Npc3NlID0gdGhpcy5udWFnZV9hYnNjaXNzZSh0aGlzLmxvZy50ZW1wZXJhdHVyZXMpOwogICAgICBsZXQgZGF0YSA9IG5ldyBBcnJheSgpOwogICAgICBmb3IgKGNvbnN0IHByb3AgaW4gdGhpcy5sb2cudGVtcGVyYXR1cmVzWzBdLnZhbHVlcykgewogICAgICAgIGxldCB0ZW1wcyA9IG5ldyBBcnJheSh0aGlzLmxvZy50ZW1wZXJhdHVyZXMubGVuZ3RoKTsKICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmxvZy50ZW1wZXJhdHVyZXMubGVuZ3RoOyBpKyspewogICAgICAgICAgdGVtcHNbaV0gPSB0aGlzLmxvZy50ZW1wZXJhdHVyZXNbaV0udmFsdWVzW3Byb3BdOwogICAgICAgIH0KICAgICAgICBkYXRhLnB1c2godGVtcHMpCiAgICAgIH0KICAgICAgdGhpcy5kZXNzaW5lcl9udWFnZShkYXRhLCBhYnNjaXNzZSk7CiAgICB9LAogICAgdGVtcF9tYXgoZG9ubmVlcyl7CiAgICAgIHZhciBuYl96b25lcyA9IGRvbm5lZXMubGVuZ3RoOwogICAgICB2YXIgdF9tYXggPSBkMy5tYXgoZG9ubmVlc1swXSk7CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuYl96b25lczsgaSsrKXsKICAgICAgICAgIGlmKHRfbWF4IDwgZDMubWF4KGRvbm5lZXNbaV0pKXsKICAgICAgICAgICAgICB0X21heCA9IGQzLm1heChkb25uZWVzW2ldKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdF9tYXg7CiAgICB9LAogICAgbnVhZ2VfYWJzY2lzc2UodGVtcHMpewogICAgICBsZXQgdGFiID0gbmV3IEFycmF5KHRlbXBzLmxlbmd0aCk7CiAgICAgIGZvcihsZXQgaT0wOyBpPHRlbXBzLmxlbmd0aDsgaSsrKXsKICAgICAgICB0YWJbaV0gPSBNYXRoLmZsb29yKHRlbXBzW2ldLmRhdGUvMTAwMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRhYjsKICAgIH0sCiAgICBncmlsbGVfc2Vsb25fWShBeGVZKSB7CiAgICAgIHJldHVybiBkMy5heGlzTGVmdChBeGVZKS50aWNrcygxMCkKICAgIH0sCiAgICBkZXNzaW5lcl9udWFnZShkYXRhLCB0YWJfdGVtcHMpewogICAgICB2YXIgbmJfem9uZXMgPSBkYXRhLmxlbmd0aDsKICAgICAgdmFyIG5iX21lc3VyZXMgPSBkYXRhWzBdLmxvZzsKICAgICAgLy8gdmFyIG5iX21lc3VyZXMgPSBkYXRhWzBdLmxlbmd0aDsKICAgICAgdmFyIG1hcmdlWCA9IDMwOwogICAgICB2YXIgbWFyZ2VZID0gMjA7CiAgICAgIHZhciBIYXV0ZXVyX2dyYXBoZSA9IHRoaXMudGVtcF9tYXgoZGF0YSkgKyA1MDsKICAgICAgdmFyIExhcmdldXJfZ3JhcGhlID0gdGhpcy5sYXJnZXVyX2dyYXBoZTsKCiAgICAgIHZhciBBeGVZID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgICAgICAgIC5kb21haW4oW3RoaXMudGVtcF9tYXgoZGF0YSkrMTAwLDBdKQogICAgICAgICAgICAgIC5yYW5nZShbMCxIYXV0ZXVyX2dyYXBoZV0pCgogICAgICB2YXIgQXhlWCA9IGQzLnNjYWxlUG9pbnQoKQogICAgICAgICAgICAgICAgICAuZG9tYWluKHRhYl90ZW1wcykKICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLExhcmdldXJfZ3JhcGhlXSkKCgoKICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgic3ZnIikKICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIExhcmdldXJfZ3JhcGhlKzEwMCttYXJnZVgpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgSGF1dGV1cl9ncmFwaGUrMTAwKTsKICAgICAgc3ZnLmFwcGVuZCgiZyIpCiAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK21hcmdlWCsiLCIrIC1tYXJnZVkgKyIpIikKICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KEF4ZVkpKTsKCiAgICAgIHN2Zy5hcHBlbmQoImciKQogICAgICAgICAgLmF0dHIoImNsYXNzIiwgImdyaWxsZSIpCiAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK21hcmdlWCsiLCIrIC1tYXJnZVkgKyIpIikKICAgICAgICAgIC5jYWxsKHRoaXMuZ3JpbGxlX3NlbG9uX1koQXhlWSkKICAgICAgICAgICAgICAudGlja1NpemUoLUxhcmdldXJfZ3JhcGhlKQogICAgICAgICAgICAgIC50aWNrRm9ybWF0KCIiKQogICAgICAgICAgKTsKCiAgICAgIHN2Zy5zZWxlY3RBbGwoIi5ncmlsbGUgbGluZSIpLnN0eWxlKCJzdHJva2UiLCAibGlnaHRncmF5Iik7CgogICAgICBzdmcuYXBwZW5kKCJnIikKICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIisgbWFyZ2VYICsiLCIrKEhhdXRldXJfZ3JhcGhlLW1hcmdlWSkrIikiKQogICAgICAuY2FsbChkMy5heGlzQm90dG9tKEF4ZVgpLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCwgaSl7CiAgICAgICAgICBpZihMYXJnZXVyX2dyYXBoZS9uYl9tZXN1cmVzIDwgMTQpewogICAgICAgICAgICAgIGlmKExhcmdldXJfZ3JhcGhlL25iX21lc3VyZXMgPCAzLjUpewogICAgICAgICAgICAgICAgICBpZihpJTEwID09IDApewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuKCIiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYoaSU1ID09IDApewogICAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuKCIiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpOwogICAgICB9KSk7CgogICAgICBsZXQgY291bGV1cnMgPSB0aGlzLmNvdWxldXJzOwogICAgICBmb3IodmFyIG4gPSAwOyBuIDwgbmJfem9uZXM7IG4rKyl7CiAgICAgICAgICBzdmcuZGF0dW0oZGF0YVtuXSkKICAgICAgICAgICAgICAuYXBwZW5kKCJwYXRoIikKICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJub25lIikKICAgICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgY291bGV1cnNbbl0pCiAgICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpCiAgICAgICAgICAgICAgLmF0dHIoImRhdGEtbGVnZW5kIixmdW5jdGlvbihkKSB7cmV0dXJuIGQ7fSkKICAgICAgICAgICAgICAuYXR0cigiZCIsIGQzLmxpbmUoKQogICAgICAgICAgICAgICAgICAgICAgLngoZnVuY3Rpb24oZCwgaSkge3JldHVybiBtYXJnZVgrQXhlWCh0YWJfdGVtcHNbaV0pOyB9KQogICAgICAgICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkge3JldHVybiBBeGVZKGQpLW1hcmdlWTsgfSkKICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICBzdmcuc2VsZWN0QWxsKCJjZXJjbGUiICsgbikKICAgICAgICAgIC5kYXRhKGRhdGFbbl0pCiAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgLmFwcGVuZCgiY2lyY2xlIikKICAgICAgICAgIC5hdHRyKCJmaWxsIiwgY291bGV1cnNbbl0pCiAgICAgICAgICAuYXR0cigiciIsIDMuNSkKICAgICAgICAgIC5hdHRyKCJjeCIsZnVuY3Rpb24oZCwgaSkge3JldHVybiBtYXJnZVgrQXhlWCh0YWJfdGVtcHNbaV0pOyB9KQogICAgICAgICAgLmF0dHIoImN5IixmdW5jdGlvbihkKSB7cmV0dXJuIEF4ZVkoZCktbWFyZ2VZOyB9KTsKICAgICAgfQoKICAgICAgdmFyIGxlZ2VuZF9rZXlzID0gW107CiAgICAgIGZvcih2YXIgaSA9IDE7IGkgPD0gbmJfem9uZXM7IGkrKyl7CiAgICAgICAgbGVnZW5kX2tleXMucHVzaCgiWiIgKyBpKTsKICAgICAgfQoKICAgICAgdmFyIExlZ2VuZGUgPSBzdmcuc2VsZWN0QWxsKCIuTGVnZW5kZSIpLmRhdGEobGVnZW5kX2tleXMpCiAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCJMZWdlbmRlIikKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCxpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIChMYXJnZXVyX2dyYXBoZSArIDcwKSArICIsIiArICgoaSoyMCkrbWFyZ2VZKSsiKSI7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgIExlZ2VuZGUuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkge3JldHVybiBkO30pCiAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMTUsOSkiKTsgLy9hbGlnbmVyIGxlIHRleHRlIGV0IGxlcyByZWN0CgogICAgICBMZWdlbmRlLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCBmdW5jdGlvbiAoZCwgaSkge3JldHVybiBjb3VsZXVyc1tpXTsgfSkKICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCAxMCkuYXR0cigiaGVpZ2h0IiwgMTApOwogICAgfSwKICAgIHJhbmRvbV9jb3VsZXVyKCkgewogICAgICByZXR1cm4gInJnYigiICsgKDIwKk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMykpICsiLCIgKyAoMjAqTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEzKSkgKyAiLCAiICsgKDIwKk1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMykpICsgIikiOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Graphe_logs.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graphe_logs.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <svg></svg>\n  </v-container>\n</template>\n\n<script>\n  import * as d3 from 'd3';\n  export default {\n    name: 'Graphe_logs',\n    props: ['itemId'],\n    data: function() {\n      return {\n        id: this.itemId,\n        log: undefined,\n        couleurs: [\"#ff0000\",\"#0000ff\",\"#ffff00\",\"#000000\",\"#800000\",\"#ffa500\",\"#008000\",\"#800080\",\"#ffd700\",\"#ff00ff\",\"#00ffff\",\"#ffc0cb\",\"#00ffff\",\"#f0ffff\",\"#f5f5dc\",\"#a52a2a\",\"#00008b\",\"#008b8b\",\"#a9a9a9\",\"#006400\",\"#bdb76b\",\"#8b008b\",\"#556b2f\",\"#ff8c00\",\"#9932cc\",\"#8b0000\",\"#e9967a\",\"#9400d3\",\"#ff00ff\",\"#4b0082\",\"#f0e68c\",\"#add8e6\",\"#e0ffff\",\"#90ee90\",\"#d3d3d3\",\"#ffb6c1\",\"#ffffe0\",\"#00ff00\",\"#000080\",\"#808000\",\"#800080\",\"#c0c0c0\",],\n        largeur_graphe: undefined,\n      }\n    },\n    mounted() {\n      this.largeur_graphe = Math.floor(window.innerWidth*.6);\n      let data_to_send = [\"get_detail_log\", this.id];\n      let headers = {'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'POST, GET, PUT, OPTIONS, DELETE',\n            'Access-Control-Allow-Headers': 'Access-Control-Allow-Methods, Access-Control-Allow-Origin, Origin, Accept, Content-Type',\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }\n      fetch(\"http://localhost:3000\", {\n        method: 'post',\n        headers,\n        body: JSON.stringify(data_to_send)\n\n      })\n      .then(res=> res.json())\n      .then(data => {\n        this.log = data[1];\n        this.tracerGraphe();\n      });\n    },\n    methods: {\n      tracerGraphe(){\n        let abscisse = this.nuage_abscisse(this.log.temperatures);\n        let data = new Array();\n        for (const prop in this.log.temperatures[0].values) {\n          let temps = new Array(this.log.temperatures.length);\n          for(let i=0; i<this.log.temperatures.length; i++){\n            temps[i] = this.log.temperatures[i].values[prop];\n          }\n          data.push(temps)\n        }\n        this.dessiner_nuage(data, abscisse);\n      },\n      temp_max(donnees){\n        var nb_zones = donnees.length;\n        var t_max = d3.max(donnees[0]);\n        for(var i = 0; i < nb_zones; i++){\n            if(t_max < d3.max(donnees[i])){\n                t_max = d3.max(donnees[i]);\n            }\n        }\n        return t_max;\n      },\n      nuage_abscisse(temps){\n        let tab = new Array(temps.length);\n        for(let i=0; i<temps.length; i++){\n          tab[i] = Math.floor(temps[i].date/1000);\n        }\n        return tab;\n      },\n      grille_selon_Y(AxeY) {\n        return d3.axisLeft(AxeY).ticks(10)\n      },\n      dessiner_nuage(data, tab_temps){\n        var nb_zones = data.length;\n        var nb_mesures = data[0].log;\n        // var nb_mesures = data[0].length;\n        var margeX = 30;\n        var margeY = 20;\n        var Hauteur_graphe = this.temp_max(data) + 50;\n        var Largeur_graphe = this.largeur_graphe;\n\n        var AxeY = d3.scaleLinear()\n                .domain([this.temp_max(data)+100,0])\n                .range([0,Hauteur_graphe])\n\n        var AxeX = d3.scalePoint()\n                    .domain(tab_temps)\n                    .range([0,Largeur_graphe])\n\n\n\n        var svg = d3.select(\"svg\")\n            .attr(\"width\", Largeur_graphe+100+margeX)\n            .attr(\"height\", Hauteur_graphe+100);\n        svg.append(\"g\")\n            .attr(\"transform\", \"translate(\"+margeX+\",\"+ -margeY +\")\")\n            .call(d3.axisLeft(AxeY));\n\n        svg.append(\"g\")\n            .attr(\"class\", \"grille\")\n            .attr(\"transform\", \"translate(\"+margeX+\",\"+ -margeY +\")\")\n            .call(this.grille_selon_Y(AxeY)\n                .tickSize(-Largeur_graphe)\n                .tickFormat(\"\")\n            );\n\n        svg.selectAll(\".grille line\").style(\"stroke\", \"lightgray\");\n\n        svg.append(\"g\")\n        .attr(\"transform\", \"translate(\"+ margeX +\",\"+(Hauteur_graphe-margeY)+\")\")\n        .call(d3.axisBottom(AxeX).tickFormat(function(d, i){\n            if(Largeur_graphe/nb_mesures < 14){\n                if(Largeur_graphe/nb_mesures < 3.5){\n                    if(i%10 == 0){\n                        return i;\n                    }\n                    return(\"\");\n                }\n                if(i%5 == 0){\n                    return i;\n                }\n                return(\"\");\n            }\n            return i;\n        }));\n\n        let couleurs = this.couleurs;\n        for(var n = 0; n < nb_zones; n++){\n            svg.datum(data[n])\n                .append(\"path\")\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", couleurs[n])\n                .attr(\"stroke-width\", 2)\n                .attr(\"data-legend\",function(d) {return d;})\n                .attr(\"d\", d3.line()\n                        .x(function(d, i) {return margeX+AxeX(tab_temps[i]); })\n                        .y(function(d) {return AxeY(d)-margeY; })\n                    );\n\n         svg.selectAll(\"cercle\" + n)\n            .data(data[n])\n            .enter()\n            .append(\"circle\")\n            .attr(\"fill\", couleurs[n])\n            .attr(\"r\", 3.5)\n            .attr(\"cx\",function(d, i) {return margeX+AxeX(tab_temps[i]); })\n            .attr(\"cy\",function(d) {return AxeY(d)-margeY; });\n        }\n\n        var legend_keys = [];\n        for(var i = 1; i <= nb_zones; i++){\n          legend_keys.push(\"Z\" + i);\n        }\n\n        var Legende = svg.selectAll(\".Legende\").data(legend_keys)\n                        .enter()\n                        .append(\"g\")\n                        .attr(\"class\",\"Legende\")\n                        .attr(\"transform\", function (d,i) {\n                            return \"translate(\" + (Largeur_graphe + 70) + \",\" + ((i*20)+margeY)+\")\";\n                        });\n\n        Legende.append(\"text\")\n                .text(function (d) {return d;})\n                .attr(\"transform\", \"translate(15,9)\"); //aligner le texte et les rect\n\n        Legende.append(\"rect\")\n                .attr(\"fill\", function (d, i) {return couleurs[i]; })\n                .attr(\"width\", 10).attr(\"height\", 10);\n      },\n      random_couleur() {\n        return \"rgb(\" + (20*Math.floor(Math.random()*13)) +\",\" + (20*Math.floor(Math.random()*13)) + \", \" + (20*Math.floor(Math.random()*13)) + \")\";\n      }\n    }\n  }\n</script>\n"]}]}